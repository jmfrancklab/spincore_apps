

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example of how the configuration file is called and used &mdash; spincore_apps 0.9 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery_custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="Hahn_echo_proc.html" />
    <link rel="prev" title="Test Run" href="run_test.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> spincore_apps
          

          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">SpinCore Example Gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="adc_offset.html">Calculate ADC offset</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ep_spacing.html">Generate an appropriately spaced power axis for a progressive saturation</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_test.html">Test Run</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Example of how the configuration file is called and used</a></li>
<li class="toctree-l2"><a class="reference internal" href="save_data_example.html">test of logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="gds_for_tune.html">GDS for tune</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_Hahn_echo.html">Spin Echo</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_nutation.html">Nutation</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_CPMG.html">CPMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_var_tau.html">Varied Tau Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_IR.html">Run Inversion Recovery at set power</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_T1CPMG.html">T1CPMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_progressive_saturation.html">Run an Enhancement Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_CPMG_calib.html">CPMG_calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_field_dep_justMw.html">Field Sweep at constant power</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_CPMG_mw.html">CPMG with microwaves</a></li>
<li class="toctree-l2"><a class="reference internal" href="combined_ODNP.html">Automated Combined DNP with Log</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Lowest level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html#first-level-in-this-repo">First level in this repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html#second-level-in-this-repo">Second level in this repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html#top-level">Top level</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">spincore_apps</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../intro.html">Lowest level</a> &raquo;</li>
        
          <li><a href="index.html">SpinCore Example Gallery</a> &raquo;</li>
        
      <li>Example of how the configuration file is called and used</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_examples/basic_config_example.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-basic-config-example-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</aside>
<section class="sphx-glr-example-title" id="example-of-how-the-configuration-file-is-called-and-used">
<span id="sphx-glr-auto-examples-basic-config-example-py"></span><h1>Example of how the configuration file is called and used<a class="headerlink" href="#example-of-how-the-configuration-file-is-called-and-used" title="Permalink to this headline">Â¶</a></h1>
<p>Demonstration of the basic functions and usage of the configuration file including how to initialize, and call parameters that are defaulted in the parser function or set in the configuration file. If a parameter is neither in the parser function nor the configuration file an error will be thrown letting the user know. The configuration file can easily be updated and written to within any script and then called again.</p>
<div class="sphx-glr-script-out highlight-pytb notranslate"><div class="highlight"><pre><span></span><span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;C:\Users\Alex Guinness\gitstuff\spincore_apps\examples\basic_config_example.py&quot;</span>, line <span class="m">8</span>, in <span class="n">&lt;module&gt;</span>
    <span class="kn">import</span> <span class="nn">SpinCore_pp</span>
  File <span class="nb">&quot;C:\Users\Alex Guinness\gitstuff\spincore_apps\Spincore_pp\SpinCore_pp.py&quot;</span>, line <span class="m">17</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">_SpinCore_pp</span> <span class="o">=</span> <span class="n">swig_import_helper</span><span class="p">()</span>
  File <span class="nb">&quot;C:\Users\Alex Guinness\gitstuff\spincore_apps\Spincore_pp\SpinCore_pp.py&quot;</span>, line <span class="m">16</span>, in <span class="n">swig_import_helper</span>
    <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s1">&#39;_SpinCore_pp&#39;</span><span class="p">)</span>
  File <span class="nb">&quot;C:\ProgramData\Anaconda3\lib\importlib\__init__.py&quot;</span>, line <span class="m">127</span>, in <span class="n">import_module</span>
    <span class="k">return</span> <span class="n">_bootstrap</span><span class="o">.</span><span class="n">_gcd_import</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="n">level</span><span class="p">:],</span> <span class="n">package</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
<span class="gr">ModuleNotFoundError</span>: <span class="n">No module named &#39;_SpinCore_pp&#39;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">configparser</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">SpinCore_pp</span>

<span class="c1"># initialize</span>
<span class="n">myconfig</span> <span class="o">=</span> <span class="n">SpinCore_pp</span><span class="o">.</span><span class="n">configuration</span><span class="p">(</span><span class="s2">&quot;active.ini&quot;</span><span class="p">)</span>
<span class="c1"># {{{ check that we get the errors we&#39;re supposed to</span>
<span class="c1"># set a parameter that&#39;s not registered:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;new_thing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>
    <span class="n">failure</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">failure</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">if</span> <span class="n">failure</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I tried to set an unregistered parameter, and it failed ... good!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Didn&#39;t fail on unregistered parameter!&quot;</span><span class="p">)</span>
<span class="c1"># look for a parameter that&#39;s not registered:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;another_thing&quot;</span><span class="p">]</span>
    <span class="n">failure</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">failure</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">if</span> <span class="n">failure</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I tried to get an unregistered parameter, and it failed ... good!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Didn&#39;t fail on unregistered parameter!&quot;</span><span class="p">)</span>
<span class="c1"># }}}</span>
<span class="c1"># {{{ dealing with defaults</span>
<span class="c1"># look for a parameter that isn&#39;t in the ini file, but is registered with a default</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;odnp_counter&quot;</span><span class="p">,</span> <span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;odnp_counter&quot;</span><span class="p">])</span>
<span class="c1"># look for a parameter that isn&#39;t in the ini file and does not have a default</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;p90_us&quot;</span><span class="p">,</span> <span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;p90_us&quot;</span><span class="p">])</span>  <span class="c1"># look for something that doesn&#39;t exist</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;looking for p90_us failed with:</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="c1"># }}}</span>
<span class="c1"># {{{ pretty formatting</span>
<span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;adc_offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;print out the config settings as a dictionary!&quot;</span><span class="p">,</span> <span class="n">myconfig</span><span class="o">.</span><span class="n">asdict</span><span class="p">()</span>
<span class="p">)</span>  <span class="c1"># so we can, e.g. put in an HDF5 file -- this should have the nice case that was registered</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;print them out more legibly!!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">myconfig</span><span class="p">)</span>
<span class="c1"># }}}</span>
<span class="c1"># {{{ set a parameter that is registered, and see that it will change, which can be seen by running the script twice</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;echo counter was&quot;</span><span class="p">,</span>
    <span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;echo_counter&quot;</span><span class="p">],</span>
    <span class="s2">&quot;and I&#39;m going to increment it.  If you re-run this script, this value should increase&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;echo_counter&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">myconfig</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>  <span class="c1"># this should write the adc offset and whatever else we&#39;ve changed</span>
<span class="c1"># }}}</span>
<span class="c1"># {{{ an example of pulling a full list of keyword arguments for a function</span>
<span class="n">relevant_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">j</span><span class="p">:</span> <span class="n">myconfig</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;krho_cold&quot;</span><span class="p">,</span> <span class="s2">&quot;krho_hot&quot;</span><span class="p">,</span> <span class="s2">&quot;T1water_cold&quot;</span><span class="p">,</span> <span class="s2">&quot;T1water_hot&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">myconfig</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;for calculating a IR or FIR vdlist, the relevant parameters that I find in your ini file are&quot;</span><span class="p">,</span>
    <span class="n">relevant_kwargs</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;this gives me the vdlist:&quot;</span><span class="p">,</span>
    <span class="n">SpinCore_pp</span><span class="o">.</span><span class="n">vdlist_from_relaxivities</span><span class="p">(</span><span class="n">myconfig</span><span class="p">[</span><span class="s2">&quot;concentration&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">relevant_kwargs</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># }}}</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.005 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-basic-config-example-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/38584dce40ed32cf427919150f84421f/basic_config_example.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">basic_config_example.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/bd314ef48be8cddb9920e2fad70019eb/basic_config_example.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">basic_config_example.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Hahn_echo_proc.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="run_test.html" class="btn btn-neutral float-left" title="Test Run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, John M. Franck group

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>